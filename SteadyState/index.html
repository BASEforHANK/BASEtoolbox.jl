<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Steady state · Documentation for BASEforHANK module</title><meta name="title" content="Steady state · Documentation for BASEforHANK module"/><meta property="og:title" content="Steady state · Documentation for BASEforHANK module"/><meta property="twitter:title" content="Steady state · Documentation for BASEforHANK module"/><meta name="description" content="Documentation for Documentation for BASEforHANK module."/><meta property="og:description" content="Documentation for Documentation for BASEforHANK module."/><meta property="twitter:description" content="Documentation for Documentation for BASEforHANK module."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Documentation for BASEforHANK module</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Steady state</a><ul class="internal"><li><a class="tocitem" href="#compute_steadystate"><span><code>compute_steadystate</code></span></a></li><li><a class="tocitem" href="#call_find_steadystate"><span><code>call_find_steadystate</code></span></a></li><li><a class="tocitem" href="#call_prepare_linearization"><span><code>call_prepare_linearization</code></span></a></li><li><a class="tocitem" href="#Parameters"><span>Parameters</span></a></li><li><a class="tocitem" href="#Find-stationary-equilibrium:-functions"><span>Find stationary equilibrium: functions</span></a></li></ul></li><li><a class="tocitem" href="../PerturbationSolution/">Perturbation solution</a></li><li><a class="tocitem" href="../Estimation/">Estimation</a></li><li><a class="tocitem" href="../PostEstimation/">Post estimation</a></li><li><a class="tocitem" href="../Tools/">Tools</a></li><li><a class="tocitem" href="../Parsing/">Parser</a></li><li><a class="tocitem" href="../HouseholdProblem/">Household problem</a></li><li><a class="tocitem" href="../examples/baseline/">Baseline example</a></li><li><a class="tocitem" href="../Computational Notes/">Computational Notes</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Steady state</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Steady state</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/BASEforHANK/BASEtoolbox.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/main/docs/src/SteadyState.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Computation-of-the-steady-state-and-dimensionality-reduction"><a class="docs-heading-anchor" href="#Computation-of-the-steady-state-and-dimensionality-reduction">Computation of the steady state and dimensionality reduction</a><a id="Computation-of-the-steady-state-and-dimensionality-reduction-1"></a><a class="docs-heading-anchor-permalink" href="#Computation-of-the-steady-state-and-dimensionality-reduction" title="Permalink"></a></h1><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Most of the code of this section is in the submodule <code>SteadyState</code> (<code>src/SubModules/SteadyState/</code>), except for  <code>prepare_linearization()</code>, which is generated by the preprocessor and can be found in <code>src/Preprocessor/generated_fcns/prepare_linearization_generated.jl</code>. The preprocessor uses the template stored as <code>src/Preprocessor/template_fcns/prepare_linearization.jl</code>.</p></div></div><p>The model features uninsured income shocks <span>$y$</span> (by assumption, all workers supply the same efficiency units of labor <sup class="footnote-reference"><a id="citeref-BBL" href="#footnote-BBL">[BBL]</a></sup>, so idiosyncratic productivity shocks translate to income shocks) and two assets, liquid assets (bonds) <span>$m$</span> and illiquid assets (capital) <span>$k$</span>. Entrepreneurs (last income-state) receive no labor income, but firm profits, while workers additionally receive labor union profits.</p><p>The steady state equilibrium contains, aside from the capital stock, marginal value functions <span>$V_m$</span> and <span>$V_k$</span> on a three-dimensional grid <span>$(m \times k \times y)$</span> and the ergodic joint distribution over these idiosyncratic states. We do dimensionality reduction <sup class="footnote-reference"><a id="citeref-BL" href="#footnote-BL">[BL]</a></sup> by applying the Discrete Cosine Transformation to the marginal value functions and approximating the joint distribution with a copula and state-dependent marginals.</p><p>The main functions are <a href="#BASEforHANK.call_find_steadystate"><code>call_find_steadystate()</code></a> and <a href="#BASEforHANK.call_prepare_linearization"><code>call_prepare_linearization()</code></a>, with <a href="#BASEforHANK.compute_steadystate"><code>compute_steadystate()</code></a> being a wrapper for both of them.</p><h2 id="compute_steadystate"><a class="docs-heading-anchor" href="#compute_steadystate"><code>compute_steadystate</code></a><a id="compute_steadystate-1"></a><a class="docs-heading-anchor-permalink" href="#compute_steadystate" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.compute_steadystate" href="#BASEforHANK.compute_steadystate"><code>BASEforHANK.compute_steadystate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_steadystate(m_par)</code></pre><p>A wrapper for <a href="#BASEforHANK.call_find_steadystate"><code>call_find_steadystate()</code></a> and <a href="#BASEforHANK.call_prepare_linearization"><code>call_prepare_linearization()</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>m_par::ModelParameters</code></li></ul><p><strong>Returns</strong></p><ul><li><code>SteadyResults</code>, containing returns of <a href="#BASEforHANK.PerturbationSolution.prepare_linearization"><code>prepare_linearization()</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/BASEforHANK.jl#L186-L196">source</a></section></article><p>Combines steady state computation and preparation of linearization in one function call. It has the same returns as <a href="#BASEforHANK.call_prepare_linearization"><code>call_prepare_linearization()</code></a>.</p><h2 id="call_find_steadystate"><a class="docs-heading-anchor" href="#call_find_steadystate"><code>call_find_steadystate</code></a><a id="call_find_steadystate-1"></a><a class="docs-heading-anchor-permalink" href="#call_find_steadystate" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.call_find_steadystate" href="#BASEforHANK.call_find_steadystate"><code>BASEforHANK.call_find_steadystate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">call_find_steadystate(m_par)</code></pre><p>Computes the steady state of the household problem and fills the SteadyStateStruct struct (without further steps of preparing the linearization).</p><p><strong>Arguments</strong></p><ul><li><code>m_par::ModelParameters</code></li></ul><p><strong>Returns</strong></p><ul><li><code>SteadyStateStruct</code>, containing returns of <a href="#BASEforHANK.SteadyState.find_steadystate"><code>find_steadystate()</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/BASEforHANK.jl#L96-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.SteadyState.find_steadystate" href="#BASEforHANK.SteadyState.find_steadystate"><code>BASEforHANK.SteadyState.find_steadystate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_steadystate(m_par)</code></pre><p>Find the stationary equilibrium capital stock as well as the associated marginal value functions and the stationary distribution of idiosyncratic states.</p><p>This function solves for the market clearing capital stock in the Aiyagari model with idiosyncratic income risk. That is, it uses <a href="../Tools/#BASEforHANK.Tools.CustomBrent"><code>CustomBrent()</code></a> to find the root of the excess capital demand function, which is defined in <a href="#BASEforHANK.SteadyState.Kdiff"><code>Kdiff()</code></a>. It does so first on a coarse grid and then on the actual grid.</p><p><strong>Arguments</strong></p><ul><li><code>m_par::ModelParameters</code></li></ul><p><strong>Returns</strong></p><ul><li><code>KSS</code>: Steady-state capital stock</li><li><code>WbSS</code>, <code>WkSS</code>: Marginal value functions</li><li><code>distrSS::Array{Float64,3}</code>: Steady-state distribution of idiosyncratic states, computed by <a href="#BASEforHANK.SteadyState.Ksupply"><code>Ksupply()</code></a></li><li><code>n_par::NumericalParameters</code>, <code>m_par::ModelParameters</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/SubModules/SteadyState/find_steadystate.jl#L1-L23">source</a></section></article><p>The function takes the parameter <code>struct</code> <code>ModelParameters</code> as input <code>m_par</code> (see <a href="#Parameters">Parameters</a>).</p><p>To find the stationary equilibrium, we proceed in roughly the following steps:</p><ol><li><p>Instantiate the parameter <code>struct</code> <code>NumericalParameters</code> as <code>n_par</code> (see <a href="#Parameters">Parameters</a>). Within the struct, we set the number of income states [<code>nh</code>] and use the <a href="../Tools/#BASEforHANK.Tools.Tauchen"><code>BASEforHANK.Tools.Tauchen()</code></a> method to obtain a grid and a transition matrix of income, given the autocorrelation of the income process [<code>m_par.ρ_h</code>]. Then, include entrepreneurial state.</p></li><li><p>Find equilibrium capital stock (by finding a root of <a href="#BASEforHANK.SteadyState.Kdiff"><code>BASEforHANK.SteadyState.Kdiff()</code></a>), where  the supply of capital by households is calculated in <a href="#BASEforHANK.SteadyState.Ksupply"><code>BASEforHANK.SteadyState.Ksupply()</code></a>.</p><p><code>Ksupply()</code> uses the Endogenous Grid Method (see <a href="#BASEforHANK.SteadyState.EGM_policyupdate"><code>BASEforHANK.SteadyState.EGM_policyupdate()</code></a>) to iteratively obtain optimal policies and marginal value functions. The supply of capital by households is then computed based on the eigenvector associated with the unit eigenvalue of the transition matrix that comes out of the households&#39; policies.</p><p>Root finding is performed using Brent&#39;s method where the customized algorithm generates initial guesses for value functions and distributions based on previous iterations in the root finding.</p></li></ol><p>This procedure is performed twice: First for a coarse grid (specified in the function) and then for the user-specified grid up to the user-desired precision [<code>n_par.ϵ</code>] (both defined in the <a href="#Parameters">Parameters</a>).</p><h2 id="call_prepare_linearization"><a class="docs-heading-anchor" href="#call_prepare_linearization"><code>call_prepare_linearization</code></a><a id="call_prepare_linearization-1"></a><a class="docs-heading-anchor-permalink" href="#call_prepare_linearization" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.call_prepare_linearization" href="#BASEforHANK.call_prepare_linearization"><code>BASEforHANK.call_prepare_linearization</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">call_prepare_linearization(ss, m_par)</code></pre><p>Prepares linearization and fills the SteadyResults struct.</p><p><strong>Arguments</strong></p><ul><li><code>ss::SteadyStateStruct</code>: Output of <a href="#BASEforHANK.call_find_steadystate"><code>call_find_steadystate()</code></a></li><li><code>m_par::ModelParameters</code></li></ul><p><strong>Returns</strong></p><ul><li><code>SteadyResults</code>, containing returns of <a href="#BASEforHANK.PerturbationSolution.prepare_linearization"><code>prepare_linearization()</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/BASEforHANK.jl#L119-L130">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.PerturbationSolution.prepare_linearization" href="#BASEforHANK.PerturbationSolution.prepare_linearization"><code>BASEforHANK.PerturbationSolution.prepare_linearization</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">prepare_linearization(K, Wb, Wk, distr, n_par, m_par)</code></pre><p>Given the stationary equilibrium of the household side, computed in <a href="#BASEforHANK.SteadyState.find_steadystate"><code>find_steadystate()</code></a>, this function performs several steps:</p><ul><li>Step 1: compute the stationary equilibrium.</li><li>Step 2: perform the dimensionality reduction of the marginal value functions as well as the distribution.</li><li>Step 3: compute the aggregate steady state from <code>input_aggregate_steady_state.mod</code>.</li><li>Step 4: produce indexes to access the variables in the linearized model.</li><li>Step 5: return the results.</li></ul><p><strong>Arguments</strong></p><ul><li><code>K::Float64</code>: steady-state capital stock</li><li><code>Wb::Array{Float64,3}</code>, <code>Wk::Array{Float64,3}</code>: steady-state marginal value functions</li><li><code>distr::Array{Float64,3}</code>: steady-state distribution of idiosyncratic states</li><li><code>n_par::NumericalParameters</code>,<code>m_par::ModelParameters</code></li></ul><p><strong>Returns</strong></p><ul><li><code>XSS::Array{Float64,1}</code>, <code>XSSaggr::Array{Float64,1}</code>: steady state vectors produced by <a href="../Parsing/#BASEforHANK.Parsing.@writeXSS"><code>@writeXSS()</code></a></li><li><code>indexes</code>, <code>indexes_aggr</code>: <code>struct</code>s for accessing <code>XSS</code>,<code>XSSaggr</code> by variable names, produced by <a href="../Parsing/#BASEforHANK.Parsing.@make_fn"><code>@make_fn()</code></a>, <a href="../Parsing/#BASEforHANK.Parsing.@make_fnaggr"><code>@make_fnaggr()</code></a></li><li><code>compressionIndexes::Array{Array{Int,1},1}</code>: indexes for compressed marginal value functions (<code>V_m</code> and <code>V_k</code>)</li><li><code>n_par::NumericalParameters</code>, <code>m_par::ModelParameters</code>: updated parameters</li><li><code>CDFSS</code>, <code>CDF_bSS</code>, <code>CDF_kSS</code>, <code>CDF_hSS</code>: cumulative distribution functions (joint and marginals)</li><li><code>distrSS::Array{Float64,3}</code>: steady state distribution of idiosyncratic states, computed by <a href="#BASEforHANK.SteadyState.Ksupply"><code>Ksupply()</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/Preprocessor/template_fcns/prepare_linearization.jl#L12-L45">source</a></section></article><p>We first calculate other equilibrium quantities and produce distributional summary statistics (<a href="../Tools/#BASEforHANK.Tools.distrSummaries"><code>BASEforHANK.Tools.distrSummaries()</code></a>). Next, we reduce the dimensionality:</p><ol><li>Find the sparse representation of fluctuations of <span>$V_m$</span> and <span>$V_k$</span> around the steady state. For this purpose,  calculate the derivatives of <span>$V_m$</span> and <span>$V_k$</span> with respect to all prices  that enter the household problem. Then transform these derivatives using the  Discrete Cosine Transformation (Julia-package <code>FFTW</code>) into polynomial coefficients.  Calculate the average absolute value of those coefficients and retain those that explain a large  share of the variance of coefficients (up to <code>100*(1-n_par.reduc_marginal_value)</code> percent).  Add, in the same way, polynomial coefficients that explain  <span>$V_m$</span> and <span>$V_k$</span> themselves.  The quality of the latter approximation is controlled by <code>n_par.reduc_value</code>.  The corresponding indices are saved in <code>compressionIndexes</code>. This whole step  is being done in <code>first_stage_reduction()</code>.</li><li>Prepare a node mesh on which the time-varying linear interpolant of the copula   is defined. The grid in each <span>$m$</span>, <span>$k$</span>, and <span>$y$</span> dimension is selected   such that each resulting bin holds approximately the same share of the   respective aggregate variable.</li></ol><p>Lastly, we collect the steady-state values of all model variables in the vector <code>XSS</code> (see <a href="../Parsing/#BASEforHANK.Parsing.@writeXSS"><code>BASEforHANK.Parsing.@writeXSS</code></a>). The <em>state</em> variables consist of the marginal distributions over <span>$m$</span>, <span>$k$</span> and <span>$y$</span> and the aggregate state variables (collected in <code>state_names</code>). The <em>control</em> variables consist of the steady state marginal value functions (over the full grid) and the aggregate control variables (collected in <code>control_names</code>; these vectors are defined in the main script <code>BASEforHANK.jl</code>).</p><p>While the steady-state marginal value functions have full dimensionality, in the vectors that collect <em>deviations</em> from steady state (in <a href="../PerturbationSolution/#BASEforHANK.PerturbationSolution.Fsys"><code>BASEforHANK.PerturbationSolution.Fsys()</code></a>, those are <code>X</code> and <code>XPrime</code>) only the coefficients of the most important Chebyshev polynomials are saved. Additionally, the deviations of the marginal distributions are saved with one entry short of the grid size, since the marginals are restricted to sum up to 1. We manage this by creating the <code>struct</code> <code>indexes</code> (using <a href="../Parsing/#BASEforHANK.Parsing.@make_fn"><code>BASEforHANK.Parsing.@make_fn</code></a>), that has two fields for each variable: steady state value and deviation.</p><p>We also construct the vector <code>XSSaggr</code> and the <code>struct</code> <code>indexes_aggr</code>, which are similar to the above but only store (and manage) aggregate variables. This is useful for differentiating only with respect to aggregate variables in the estimation part (see <a href="../Estimation/#BASEforHANK.PerturbationSolution.LinearSolution_reduced_system"><code>BASEforHANK.PerturbationSolution.LinearSolution_reduced_system()</code></a>).</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>If you change the household decision model and hence need to customize the steady state solution, you will need to adjust the template <code>Preprocessor/template_fcns/prepare_linearization.jl</code> and not <code>Preprocessor/generated_fcns/prepare_linearization_generated.jl</code> which will be overwritten by the model parser based on <code>Preprocessor/template_fcns/prepare_linearization.jl</code>. Note that the &quot;definition&quot; of the function (right click in VSCode) in the module is the generated one.</p></div></div><h2 id="Parameters"><a class="docs-heading-anchor" href="#Parameters">Parameters</a><a id="Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Parameters" title="Permalink"></a></h2><p>The model parameters for the steady state have to be calibrated. We set them in the <code>struct</code> <code>ModelParameters</code>. It also contains all other parameters that are estimated, including the stochastic process-parameters for the aggregate shocks.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.Parsing.ModelParameters" href="#BASEforHANK.Parsing.ModelParameters"><code>BASEforHANK.Parsing.ModelParameters</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ModelParameters()</code></pre><p>A structure to collect all model parameters, including calibrated values and prior distributions for estimation.</p><p><strong>Overview</strong></p><ul><li>This struct is designed for macroeconomic models and includes parameters related to household preferences, income processes, technological factors, monetary policy, fiscal policy, and exogenous shocks.</li><li>The parameters are annotated with metadata such as names (both ASCII and LaTeX), prior distributions, and a boolean flag indicating whether they are estimated.</li><li>Uses the <code>Parameters</code>, <code>FieldMetadata</code>, and <code>Flatten</code> packages to facilitate parameter management.</li></ul><p><strong>Fields</strong></p><p>Each field follows the structure:</p><pre><code class="language-julia hljs">parameter::T = value | &quot;ascii_name&quot; | L&quot;latex_name&quot; | prior_distribution | estimated</code></pre><ul><li><code>parameter</code>: Internal model parameter name.</li><li><code>value</code>: Default numerical value.</li><li><code>ascii_name</code>: Human-readable name used in output or logging.</li><li><code>latex_name</code>: Corresponding LaTeX notation for use in reports and documentation.</li><li><code>prior_distribution</code>: Prior distribution for Bayesian estimation (if applicable).</li><li><code>estimated</code>: Boolean indicating whether the parameter is estimated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/examples/baseline/Model/input_parameters.jl#L6-L36">source</a></section></article><p>The numerical parameters contain the grid (and the meshes) on which the stationary equilibrium is solved, discretization results of <a href="#BASEforHANK.call_find_steadystate"><code>call_find_steadystate()</code></a> like the transition matrix of income and the joint distribution, and other parameters that determine the numerical approximation or solution technique, like <code>reduc</code> or <code>sol_algo</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.Parsing.NumericalParameters" href="#BASEforHANK.Parsing.NumericalParameters"><code>BASEforHANK.Parsing.NumericalParameters</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NumericalParameters()</code></pre><p>Collect parameters for the numerical solution of the model in a <code>struct</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/examples/baseline/Model/input_parameters.jl#L211-L215">source</a></section></article><p>In particular, <code>nh</code>, <code>nk</code>, and <code>nb</code> control the resolution for the income, illiquid asset, and liquid asset grid. The resolution of the copula used in the linearization does not need to coincide with that grid and is controlled by <code>nh_copula</code>, <code>nk_copula</code>, and <code>nb_copula</code>, respectively. Note, however, that the copula resolution should not exceed the actual grid size.</p><h2 id="Find-stationary-equilibrium:-functions"><a class="docs-heading-anchor" href="#Find-stationary-equilibrium:-functions">Find stationary equilibrium: functions</a><a id="Find-stationary-equilibrium:-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Find-stationary-equilibrium:-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.SteadyState.Kdiff" href="#BASEforHANK.SteadyState.Kdiff"><code>BASEforHANK.SteadyState.Kdiff</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Kdiff(
    KD,
    n_par,
    m_par,
    initialize = true,
    Wb_guess = zeros(1, 1, 1),
    Wk_guess = zeros(1, 1, 1),
    distr_guess = zeros(1, 1, 1)
)</code></pre><p>This function is used to find the stationary equilibrium of the household block of the model, in particular, it is used in <a href="#BASEforHANK.SteadyState.find_steadystate"><code>find_steadystate()</code></a>.</p><p>Calculate the difference between the capital stock that is demanded/assumed (KD) and the capital stock that prevails under that demanded capital stock&#39;s implied prices when households face idiosyncratic income risk (Aiyagari model).</p><p>Requires global functions from the IncomesETC module and <a href="#BASEforHANK.SteadyState.Ksupply"><code>Ksupply()</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>KD::Float64</code>: Assumed capital demand (guess)</li><li><code>n_par::NumericalParameters</code>, <code>m_par::ModelParameters</code></li><li><code>initialize::Bool = true</code>: If true, initialize the marginal value functions and   stationary distribution, otherwise use the provided guesses that follow. Providing the   guesses can be used in <a href="../Tools/#BASEforHANK.Tools.CustomBrent"><code>CustomBrent()</code></a> to speed up the solution since the   results from the previous iteration can be used as starting values.</li><li><code>Wb_guess::AbstractArray = zeros(1, 1, 1)</code>: Guess for marginal value of liquid assets</li><li><code>Wk_guess::AbstractArray = zeros(1, 1, 1)</code>: Guess for marginal value of illiquid   assets</li><li><code>distr_guess::AbstractArray = zeros(1, 1, 1)</code>: Guess for stationary distribution</li></ul><p><strong>Returns</strong></p><ul><li><code>diff::Float64</code>: Difference between the demanded and supplied capital stock</li><li><code>Wb::AbstractArray</code>: Marginal value of liquid assets, implied by capital demand</li><li><code>Wk::AbstractArray</code>: Marginal value of illiquid assets, implied by capital demand</li><li><code>distr::AbstractArray</code>: Stationary distribution of idiosyncratic states, implied by   capital demand</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/SubModules/SteadyState/IM_fcns/fcn_kdiff.jl#L1-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.SteadyState.Ksupply" href="#BASEforHANK.SteadyState.Ksupply"><code>BASEforHANK.SteadyState.Ksupply</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">Ksupply(
    args_hh_prob,
    n_par,
    m_par,
    Wb,
    Wk,
    distr_guess,
    net_income,
    eff_int,
)</code></pre><p>Calculate the aggregate savings when households face idiosyncratic income risk by first solving the household problem using the endogenous grid method (EGM) and then finding the stationary distribution of idiosyncratic states.</p><p>Idiosyncratic state is tuple <code>(b,k,y)</code>, where:</p><ol><li><code>b</code>: liquid assets,</li><li><code>k</code>: illiquid assets,</li><li><code>y</code>: labor income.</li></ol><p>This function is used in <a href="#BASEforHANK.SteadyState.find_steadystate"><code>find_steadystate()</code></a> to find the stationary equilibrium, as an input to <a href="#BASEforHANK.SteadyState.Kdiff"><code>Kdiff()</code></a>, and in <a href="#BASEforHANK.PerturbationSolution.prepare_linearization"><code>BASEforHANK.PerturbationSolution.prepare_linearization()</code></a> to prepare the linearization of the model.</p><p><strong>Arguments</strong></p><ul><li><code>args_hh_prob</code>: Vector of arguments to the household problem</li><li><code>RK_guess</code>: gross real interest rate illiquid assets</li><li><code>n_par</code>, <code>m_par</code></li><li><code>Wb</code>, <code>Wk</code>: guess for marginal value functions</li><li><code>distr_guess</code>: guess for stationary distribution</li><li><code>net_income</code>: incomes, output of functions from the IncomesETC module</li><li><code>eff_int</code>: effective interest rate, output of functions from the IncomesETC module</li></ul><p><strong>Returns</strong></p><ul><li><code>K</code>,<code>B</code>: aggregate saving in illiquid (<code>K</code>) and liquid (<code>B</code>) assets</li><li><code>Γ</code>,<code>Γ_a</code>,<code>Γ_n</code>: <code>sparse</code> transition matrices (average, with [<code>a</code>] or without [<code>n</code>] adjustment of illiquid asset)</li><li><code>x_a_star</code>,<code>b_a_star</code>,<code>k_a_star</code>,<code>x_n_star</code>,<code>b_n_star</code>: optimal policies for consumption [<code>c</code>], liquid [<code>m</code>] and illiquid [<code>k</code>] asset, with [<code>a</code>] or without [<code>n</code>] adjustment of illiquid asset</li><li><code>Wb</code>,<code>Wk</code>: marginal value functions</li><li><code>distr</code>: ergodic steady state of <code>Γ</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/SubModules/SteadyState/IM_fcns/fcn_ksupply.jl#L1-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="BASEforHANK.SteadyState.EGM_policyupdate" href="#BASEforHANK.SteadyState.EGM_policyupdate"><code>BASEforHANK.SteadyState.EGM_policyupdate</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EGM_policyupdate(
    EWbPrime::Array,
    EWkPrime::Array,
    args_hh_prob::Vector,
    net_income::Array,
    n_par,
    m_par,
    warnme::Bool,
    model::Union{CompleteMarkets,OneAsset,TwoAsset},
)</code></pre><p>Find optimal policies, given tomorrows marginal continuation values <code>EWbPrime</code>, <code>EWkPrime</code>, today&#39;s prices [<code>args_hh_prob</code>], and income [<code>net_income</code>], using the Endogenous Grid Method.</p><p>Optimal policies are defined over the exogenously fixed grid, while values of optimal policies (<code>b</code> and <code>k</code>) can have off-grid values. Please refer to the subsection with the title &#39;Update the optimal policy functions&#39; of the document <a href="../Computational Notes/">&#39;Computational Notes.md&#39;</a>, for a detailed explanation of the function&#39;s code. The FOC&#39;s mentioned in the code are the Euler Equations as in the <a href="../HouseholdProblem/">&#39;documentation of the household problem&#39;</a>.</p><p><strong>Arguments</strong></p><ul><li><code>EWbPrime</code>, <code>EWkPrime</code>: Marginal continuation values of liquid and illiquid assets</li><li><code>args_hh_prob</code>: Vector of arguments to the household problem</li><li><code>net_income</code>: Incomes, output of functions from the IncomesETC module</li><li><code>n_par</code>, <code>m_par</code></li><li><code>warnme</code>: If <code>true</code>, warns about non-monotonicity in resources or liquid asset choices</li><li><code>model</code>: Model type, either <code>CompleteMarkets</code>, <code>OneAsset</code>, or <code>TwoAsset</code></li></ul><p><strong>Returns</strong></p><ul><li><code>x_a_star</code>,<code>b_a_star</code>,<code>k_a_star</code>,<code>x_n_star</code>,<code>b_n_star</code>: Optimal (on-grid) policies for the composite [<code>x</code>], liquid [<code>b</code>] and illiquid [<code>k</code>] asset, with [<code>a</code>] or without [<code>n</code>] adjustment of illiquid asset</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BASEforHANK/BASEtoolbox.jl/blob/c66dab9905ed29d876cba3d6abb57eeed3a9650b/src/SubModules/SteadyState/EGM/EGM_policyupdate.jl#L1-L38">source</a></section></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-BBL"><a class="tag is-link" href="#citeref-BBL">BBL</a>For details, see the paper <a href="https://www.benjaminborn.de/files/BBL_Inequality_Sep2023.pdf">Shocks, Frictions, and Inequality in US Business Cycles</a>, <em>American Economic Review</em>, forthcoming.</li><li class="footnote" id="footnote-BL"><a class="tag is-link" href="#citeref-BL">BL</a>For details, see the paper <a href="https://doi.org/10.3982/QE1243">Solving heterogeneous agent models in discrete time with many idiosyncratic states by perturbation methods</a>, <em>Quantitative Economics</em>, Vol.11(4), November 2020, p. 1253-1288.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../PerturbationSolution/">Perturbation solution »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Tuesday 29 April 2025 08:42">Tuesday 29 April 2025</span>. Using Julia version 1.10.9.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
