# BASEtoolbox.jl

Private development repository for Bayesian Solution and Estimation (BASE) for HANK toolbox.

## Getting started

For all information on how to install and use the package, please refer to the [documentation](docs/src/index.md).

## Contributing

Before contributing, please read the following section.

### Pre-commit hooks

We use pre-commit hooks (version 4.0.1) to ensure that the code is formatted correctly and that the tests pass before committing. To install the pre-commit hooks, run the following command in the root directory of the repository, using your terminal of choice: `pip install pre-commit`. Please verify the version of the pre-commit hooks by running `pre-commit --version`. If you need to update the version, run `pip install --upgrade pre-commit`.

Then, install the pre-commit hooks by running `pre-commit install`. You can check whether the pre-commit hooks work by running `pre-commit run --all-files`.

If you encounter any issues, please let us know.

The pre-commit hooks are also checked via GitHub Actions.

#### List of pre-commit hooks

- `forbid-crlf` and `remove-crlf`: Prevent and remove carriage return (`CRLF`) line endings, ensuring consistency in line endings.
- `forbid-tabs` and `remove-tabs`: Prevent and remove tabs, ensuring consistency in indentation.
- `check-added-large-files`: Warns if files larger than 5MB are added.
- `trailing-whitespace`: Removes unnecessary trailing spaces.
- `mixed-line-ending`: Ensures consistent line endings.
- `end-of-file-fixer`: Ensures files end with a newline.
- `check-merge-conflict`: Flags unresolved merge conflicts.
- `check-yaml`: Validates YAML files.
- `nbstripout`: Removes the output from Jupyter notebooks.
- `julia-format`: Formats Julia code using `JuliaFormatter`.

### Testing

We implemented some basic tests to ensure the correct functionality of the package. So far, we have a test that ensures that the impulse response functions (IRFs) generated by code are identical to an IRF which we consider correct.

To test the functionality of the package, please follow these steps:

1. Make sure that the folder `test` exists in the root of the project folder. In the folder, the files `runtests.jl` and a `Project.toml` have to exist.
2. Open a REPL and run `] test`. This will automatically run the existing tests.

### Rules when working in the Repository

It is important that we adhere to some rules when working on the repository. The following list consists of such rules, covering all the potential interactions you may have with the repository. Please make sure you have cloned the repository or are up to date with  `main`. Please install the pre-commit hooks.

#### List of rules:

- **Branches**: When you wish to work on an issue(s), create a new branch. Each branch should correspond to an issue listed in the repo. Please name the branch according to the issue (e.g., issue99, where the number can be found underneath the title of the issue). For matters that concern more than one issue, use an informative branch name (potentially still the number of an issue). Then, checkout your branch and start working.

- **Documentation**: When making changes to the code base, every function or feature added should have sufficient inline documentation. Significant changes should be added to the repository's `README.md` or corresponding documentation files, including how new features affect the model output. It is important to be clear and to document immediately to avoid forgetting things in the future.

- **Commit Messages**: After you've made your changes, you can add your changes and write a clear commit, preferably beginning with an imperative. Keep it short. If it's something minor or insignificant, perhaps small changes to an initially larger commit, it is ok to write "Minor update", "Minor fix".

- **Code Review**: Finally, you may submit a pull request (PR). This means you have pushed your branch to the repo already. Github may immediately prompt you to submit a PR. When requesting a PR, please ask for it to be reviewed by at least two people. If approved, branch is then merged to `main`. If you are assigned to review code, you find a guide for good practices [here](https://github.com/mawrkus/pull-request-review-guide).

### Workflow for publishing code to the public repository

When this private development repository has made sufficient progress, we publish the code to the public repository. We download the code from the private repository and upload it to the public repository, as a new release, using a single, informative commit.
